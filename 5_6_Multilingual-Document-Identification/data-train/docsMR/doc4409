ამის შემდეგ აღსართანი და ამირ მირანი პირადად ეახლნენ თამარს. საქართველოში მათ საზეიმო მიღება გაუმართეს და ლაშქრობის თადარიგიც დაიჭირეს. ათაბეგი აბუ ბაქრიც შეუდგა მზადებას და მეზობელ მუსლიმან გამგებლებსაც უხმო საომრად. ბაღდადის ხალიფამ მას თავისი დროშა და ათასი ოქრო გამოუგზავნა. აბუ ბაქრმა ქალაქი განძა მიატოვა, დასავლეთისკენ დაიძრა მოწინააღმდეგის შესახვედრად და ციხე-ქალაქ შამქორთან დაბანაკდა. საქართველოს ლაშქარს დავით სოსლანი სარდლობდა. შამქორს რომ მიუახლოვდნენ, მან ორად გაჰყო ლაშქარი. შედარებით მცირე ნაწილმა ქალაქის კართან გამართა ბრძოლა, უფრო დიდი ნაწილით კი დავით სოსლანმა შამქორი მარჯვნივ მოიტოვა და ღრმა რეიდი განახორციელა მტრის ზურგში. ცუდი და უვალი გზის გამო მის ლაშქარს შეაგვიანდა და ქალაქის კართან მებრძოლ რაზმს ერთხანს გაუჭირდა, მაგრამ ბოლოს დავით სოსლანი წამოეშველა ძირითადი ლაშქრით და ამან გადაწყვიტა ბრძოლის ბედი. აბუ ბაქრმა გაქცევით უშველა თავს. ქართველებმა განძის ბაღებამდე სდიეს მოწინააღმდეგეს. მეორე დღეს შამქორელებმა ქალაქის კლიტეები მოართვეს ქართველებს. მალე განძაც მათ დამორჩილდა. შამქორის ბრძოლაში ქართველთა ლაშქარმა დიდი ნადავლი აიღო. ნადავლში იყო ხალიფას მიერ გამოგზავნილი დროშაც, რომელიც თამარმა გელათის მონასტერს შესწირა. ზოგიერთი წყაროს მიხედვით, ქართველებმა შამქორის ბრძოლაში დაამარცხეს მუსლიმანური ქვეყნების უზარმაზარი კოალიციური ლაშქარი, რომელშიც თითქოს შუა აზიიდან და ინდოეთიდან მოსული ჯარიც კი იყო. სინამდვილეში ახლო აღმოსავლეთში მაშინ არ იყო შესაფერისი სიტუაცია კოალიციური ლაშქრობის მოსაწყობად. ქართველებს საქმე ჰქონდათ ირანის აზერბაიჯანის ათაბეგის აბუ ბაქრის სამხედრო ძალასთან, რომელსაც შესაძლოა, მეზობელი ამირები მიეშველნენ თავიანთი რაზმებით.